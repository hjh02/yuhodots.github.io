{"componentChunkName":"component---src-templates-post-js","path":"/backend/19-07-18/","result":{"data":{"markdownRemark":{"html":"<p> mysql 데이터베이스를 이용한 글 읽기, 생성, 수정, 삭제가 가능한 게시판을 구현하기 위해서는 사용자가 작성하는 텍스트 정보들이 데이터베이스 서버 내 전달되어야 하고, 그러기 위해서는 데이터베이스에 테이블을 어떤 형태로 만들지 미리 모델링을 해놓아야 합니다. 그래서 이에 대해 찾아보던 중 공부한 내용을 바탕으로 이렇게 포스팅을 하게 되었습니다.</p>\n<h3>게시판 DB 모델링</h3>\n<p>게시판의 형태는 다양합니다. 이 중 저는 사용자가 글을 작성하고, 파일을 올릴 수 있는 게시판을 구현 한다고 가정하도록 하겠습니다. 그리고 이를 위한 아주 기본적인 정보들만 테이블에 담아보겠습니다. 이를 위해서는 <strong>글에 대한 테이블</strong> 하나와 <strong>파일에 대한 테이블</strong> 하나, 총 두 개의 테이블을 만들어야 합니다. <strong>첨부파일이 여러 개</strong>가 될 수 있기 때문에 테이블을 따로 만들어 주셔야 합니다.</p>\n<p> 데이터베이스를 생성하기 전에 저는 아래와 같이 이 데이터베이스에 접근할 사용자를 mysql 내에서 생성 해 주었습니다. 그리고 아래의 사용자를 통해 mysql에 접속하려면 <code class=\"language-text\">./mysql -udev -p</code> 를 입력하면 됩니다. (사용자 이름이 dev이기 때문입니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> dev<span class=\"token variable\">@127.0.0.1</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'1234'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">DELETE</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">INSERT</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">UPDATE</span> <span class=\"token keyword\">ON</span> example<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> dev<span class=\"token variable\">@127.0.0.1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>글에 대한 테이블 (tbl_board)</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/615426ea73545f8494bebff08d5e954d/c4842/19-07-18-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.31578947368421%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY0z2QCQqFMAxEvf/5FEVEEBE3cMV9yf9voBbSZKbJJKln/3Ndl/V9L/++r933DW3Hccg/zyPjbNsm73K6rrM0TW0cR2GPh/M8bZ5nCRJj8MuymHvH1nW1YRgkCt733dq2tSzLrCxL1XtcJCZJ8iUxGZ2DILBpmoSxqqrM932JgMlnszAMv4E8VxxFkUi60wChOI7FgeHrupZg0zTCNCdGkMnR0soUM7abDmPdPM9V6DjioigUk+v+nj9EA60fzUuAXgYy4K8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/615426ea73545f8494bebff08d5e954d/15813/19-07-18-2.webp 190w,\n/static/615426ea73545f8494bebff08d5e954d/1cdb2/19-07-18-2.webp 380w,\n/static/615426ea73545f8494bebff08d5e954d/9046c/19-07-18-2.webp 760w,\n/static/615426ea73545f8494bebff08d5e954d/c89f9/19-07-18-2.webp 1140w,\n/static/615426ea73545f8494bebff08d5e954d/7afe4/19-07-18-2.webp 1520w,\n/static/615426ea73545f8494bebff08d5e954d/09fed/19-07-18-2.webp 1634w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/615426ea73545f8494bebff08d5e954d/a2d4f/19-07-18-2.png 190w,\n/static/615426ea73545f8494bebff08d5e954d/3f520/19-07-18-2.png 380w,\n/static/615426ea73545f8494bebff08d5e954d/3c051/19-07-18-2.png 760w,\n/static/615426ea73545f8494bebff08d5e954d/b5cea/19-07-18-2.png 1140w,\n/static/615426ea73545f8494bebff08d5e954d/891d5/19-07-18-2.png 1520w,\n/static/615426ea73545f8494bebff08d5e954d/c4842/19-07-18-2.png 1634w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/615426ea73545f8494bebff08d5e954d/3c051/19-07-18-2.png\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4>파일에 대한 테이블 (tbl_files)</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e6728963d68c806fc25aaf414d74192/c4842/19-07-18-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.421052631578947%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAXklEQVQI122NOwrAIBBEvf8FRQtFBFltRV0/MKJFICTVfBjeCK01iAhzTtRasda62RiDnDPGGE9/1DmH3vtrH0KAUgopJYhjmPkDPEellAtsrV211kJKCe/97z7GiA0fd5e6mz/BaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5e6728963d68c806fc25aaf414d74192/15813/19-07-18-3.webp 190w,\n/static/5e6728963d68c806fc25aaf414d74192/1cdb2/19-07-18-3.webp 380w,\n/static/5e6728963d68c806fc25aaf414d74192/9046c/19-07-18-3.webp 760w,\n/static/5e6728963d68c806fc25aaf414d74192/c89f9/19-07-18-3.webp 1140w,\n/static/5e6728963d68c806fc25aaf414d74192/7afe4/19-07-18-3.webp 1520w,\n/static/5e6728963d68c806fc25aaf414d74192/09fed/19-07-18-3.webp 1634w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5e6728963d68c806fc25aaf414d74192/a2d4f/19-07-18-3.png 190w,\n/static/5e6728963d68c806fc25aaf414d74192/3f520/19-07-18-3.png 380w,\n/static/5e6728963d68c806fc25aaf414d74192/3c051/19-07-18-3.png 760w,\n/static/5e6728963d68c806fc25aaf414d74192/b5cea/19-07-18-3.png 1140w,\n/static/5e6728963d68c806fc25aaf414d74192/891d5/19-07-18-3.png 1520w,\n/static/5e6728963d68c806fc25aaf414d74192/c4842/19-07-18-3.png 1634w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5e6728963d68c806fc25aaf414d74192/3c051/19-07-18-3.png\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>파일이름은 중복되면 오류가 날 수 있기 때문에, 파일을 저장 시 이름이 중복되지 않게 처리 해 주셔야 합니다.</p>\n<p>위의 두 테이블을 아래의 코드로 구현 할 수 있습니다. 저는 price, state, class, location이라는 컬럼을 별도로 추가했으니 이 컬럼이 필요하지 않으신 분들은 이 부분 코드를 지우고 사용하시길 바랍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> tbl_board<span class=\"token punctuation\">(</span>\nid <span class=\"token keyword\">INT</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\ntitle <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">70</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\ndescription <span class=\"token keyword\">TEXT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nauthor <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\ncreated <span class=\"token keyword\">DATETIME</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nfilenum <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\ncount <span class=\"token keyword\">INT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nclass <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\nprice <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// networking에선 삭제</span>\nstate <span class=\"token keyword\">TINYINT</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// networking에선 TINYINT(1)</span>\n<span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> tbl_files<span class=\"token punctuation\">(</span>\nboard_id <span class=\"token keyword\">INT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nfile_id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nfilename <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">70</span><span class=\"token punctuation\">)</span><span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\nlocation <span class=\"token keyword\">TEXT</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>데이터베이스 내 사용자를 생성할 때, localhost와 127.0.0.1가 같은 접속이라고 생각하면 안 됩니다. 호스트를 둘 중 어느것으로 선택하느냐에 따라 패스워드가 달라지게 되므로 데이터베이스 서버 구축 시 함고하시길 바랍니다!</p>\n<ul>\n<li><a href=\"https://jybaek.tistory.com/418\">https://jybaek.tistory.com/418</a></li>\n<li><a href=\"https://dlong.tistory.com/m/133\">https://dlong.tistory.com/m/133</a></li>\n</ul>\n<h3>회원 정보 DB 모델링</h3>\n<p> 우리는 아래와 같은 테이블을 만들어야 합니다. (저는 생활코딩 이고잉님의 <a href=\"https://opentutorials.org/course/2136/12257\">자료</a>를 참고하였습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/1d499/19-07-18-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.736842105263158%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVQY01WQSYqAQAxFvf/dXLgUHHCh4oCz4vy7X6CkOxBS9TL9Kk+/dp6nxnHU+756nsccO47D4l+2bdvH7vtW3/eK41hFURjzgDQuy6Lrumw4ThJO3jHO+77/Y23bKk1TlWVp/R5NTdOo6zpzip2jmkghcZomqyVyZymKwzA0hnlA1LkNLMCHYVCWZZZzrK5rU1NV1cfmeVaSJPZ0U4jkKIoUBIHyPP+2M5DNKOBpFPNXvu9bdN+zrquJYTB9PxS6gQyBSbEqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/15813/19-07-18-4.webp 190w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/1cdb2/19-07-18-4.webp 380w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/9046c/19-07-18-4.webp 760w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/c89f9/19-07-18-4.webp 1140w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/7afe4/19-07-18-4.webp 1520w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/fce87/19-07-18-4.webp 1632w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/a2d4f/19-07-18-4.png 190w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/3f520/19-07-18-4.png 380w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/3c051/19-07-18-4.png 760w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/b5cea/19-07-18-4.png 1140w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/891d5/19-07-18-4.png 1520w,\n/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/1d499/19-07-18-4.png 1632w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9fcfa1f8dfda6d86c43c5cd5d79a167a/3c051/19-07-18-4.png\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p> 이를 소스코드로 작성하면 아래와 같습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> users <span class=\"token punctuation\">(</span> \n    id <span class=\"token keyword\">INT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token punctuation\">,</span> \n    authId <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token punctuation\">,</span>\n    username <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span> \n    password <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span> \n    salt <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token keyword\">UNIQUE</span> <span class=\"token punctuation\">(</span>authId<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">InnoDB</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p> 회원가입 시 DB에 아래와 같이 저장됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/145cfcc203be9c3e18a76b281627bd0f/21b4d/19-07-18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.105263157894738%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdklEQVQI1zWLWw6CMBREWRauwEYp1j5ue+kLkLD/HYy0xo/JyZzJDLdxxPQQKDlilk84q/GSE9LCSJGxrxU1J6wl49g3mLdCXEL3Lc1vteA8PrBaYRDiDnIGZA3ULGGN7qdADp4sgv+RL4bW//4ie+p72zhQ7180EFBVMzJDawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/145cfcc203be9c3e18a76b281627bd0f/15813/19-07-18.webp 190w,\n/static/145cfcc203be9c3e18a76b281627bd0f/1cdb2/19-07-18.webp 380w,\n/static/145cfcc203be9c3e18a76b281627bd0f/9046c/19-07-18.webp 760w,\n/static/145cfcc203be9c3e18a76b281627bd0f/c89f9/19-07-18.webp 1140w,\n/static/145cfcc203be9c3e18a76b281627bd0f/af3f0/19-07-18.webp 1280w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/145cfcc203be9c3e18a76b281627bd0f/a2d4f/19-07-18.png 190w,\n/static/145cfcc203be9c3e18a76b281627bd0f/3f520/19-07-18.png 380w,\n/static/145cfcc203be9c3e18a76b281627bd0f/3c051/19-07-18.png 760w,\n/static/145cfcc203be9c3e18a76b281627bd0f/b5cea/19-07-18.png 1140w,\n/static/145cfcc203be9c3e18a76b281627bd0f/21b4d/19-07-18.png 1280w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/145cfcc203be9c3e18a76b281627bd0f/3c051/19-07-18.png\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>","frontmatter":{"path":"/backend/19-07-18/","title":"데이터베이스 모델링하기","category":"BackEnd","date":"2019-07-18"}}},"pageContext":{}},"staticQueryHashes":["2390655019","256249292","63159454"]}